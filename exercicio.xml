<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="Untitled">
    <Sequence>
      <Sequence>
        <VerificarEquipamentos/>
        <VerificarBateria/>
        <TempoParaConcluir ttc="{ttc}"/>
        <SalaEstaLivre/>
        <PassarPano/>
        <MoverMobilia/>
        <IrParaDestino x="7" y="1"/>
        <EnviarMensagemParaGerente mensagem="Falha: mover mobilia"/>
        <EsterilizarMobilia/>
        <AcoplarNaEstacao/>
        <AspirarChao/>
        <DetectarObstaculoCamera/>
        <DetectarObstaculoLIDAR/>
        <authenticate_nurse wait_duration_sec="100"
                            message="{auth}"/>
        <publisher_nurse_deposit_sample message="{auth}"
                                        number="5"/>
        <publisher_authenticate_robot duration="100"
                                      message="{auth_robot}"/>
      </Sequence>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Condition ID="VerificarEquipamentos" editable="true"/>
    <Condition ID="VerificarBateria" editable="true"/>
    <Action ID="TempoParaConcluir" editable="true">
      <output_port name="ttc"/>
    </Action>
    <Condition ID="SalaEstaLivre" editable="true"/>
    <Action ID="PassarPano" editable="true"/>
    <Action ID="MoverMobilia" editable="true"/>
    <Action ID="IrParaDestino" editable="true">
      <input_port name="x"/>
    <input_port name="y"/>
    </Action>
    <Action ID="EsterilizarMobilia" editable="true"/>
    <Action ID="EnviarMensagemParaGerente" editable="true">
      <input_port name="mensagem"/>
    </Action>
    <Condition ID="DetectarObstaculoLIDAR" editable="true"/>
    <Condition ID="DetectarObstaculoCamera" editable="true"/>
    <Action ID="AcoplarNaEstacao" editable="true"/>
    <Action ID="authenticate_nurse"
            editable="true">
      <input_port name="wait_duration_sec"/>
      <output_port name="message"/>
    </Action>
    <Action ID="AspirarChao" editable="true"/>
    <Action ID="go_to_laboratory"
            editable="true">
      <input_port name="laboratory_name"/>
    </Action>
    <Action ID="publisher_approach_nurse"
            editable="true">
      <input_port name="message"/>
      <input_port name="number"/>
      <output_port name="laboratory_name"/>
    </Action>
    <Action ID="publisher_authenticate_robot"
            editable="true">
      <input_port name="duration"/>
      <output_port name="message"/>
    </Action>
    <Action ID="publisher_close_drawer"
            editable="true">
      <input_port name="message"/>
      <input_port name="number"/>
    </Action>
    <Action ID="publisher_nurse_deposit_sample"
            editable="true">
      <input_port name="message"/>
      <input_port name="number"/>
    </Action>
    <Action ID="publisher_open_drawer"
            editable="true">
      <input_port name="authorized"/>
      <input_port name="message"/>
      <input_port name="number"/>
    </Action>
  </TreeNodesModel>

</root>

